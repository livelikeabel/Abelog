---
title: web의 다양한 Redirect 구현
date: 2019-04-04 21:04:72
category: development
---

redirect의 뜻은 영어단어 그대로이다. `Redirect: 다시 향하게 하다 새 방향으로 돌리다.`
여러가지 redirect 방법이 있다 하나씩 살펴보자.

1. window.location.href

`herf` 메소드를 이용해서 특정 URL로 접속시 다른 URL로 이동시킬 수 있다.

```js
window.location.href = 'https://abelog.netlify.com/'
```

> 웹브라우저로 접속시에 'https://abelog.netlify.com/'로 이동시킨다.

HTTP에서, 리다이렉션

리다이렉션을 명시하는 대체 방법.

- <meta> (HTML 리다이렉션)

* DOM (Javascript 리다이렉션)

---

리다이렉트에는 몇 가지 유형이 있으며 세 가지 카테고리로 나누어 진다. 영속적, 일시적, 특수 리다이렉션

### 영속적인 리다이렉션

영원히 지속됨을 의미한다. 원래의 URL이 더 이상 사용되지 않아야 하며 새로운 URL을 더 선호해야 함을 시사한다. 검색 엔진 로봇은 그들의 인덱스 내에서 리소스에 대한 연관 URL의 갱신을 촉발시킨다....?

301 moved permanently(영구히 위치를 옮기다)

- use case: 웹 사이트의 재편성.

308 permanent redirect(영구적인 리다이렉트)

- use case: `GET`이 아닌 링크/동작을 지닌, 웹 사이트의 재편성.
  > 아.. 뭔소릴까...

### 일시적인 리다이렉션

표준 위치에서 접근할 수 없고 다른 위치에서 접근 가능한 경우가 있다. 이런 경우 일시적인 리다이렉트가 사용될 수 있다.
검색 엔진 로봇은 새로운, 일시적인 링크를 기억하지 못한다.

302 Found

- 웹 페이지가 예측하지 못한 이유로 일시적으로 이용 불가능할때 가 있다. 그런 이유로, 검색 엔진은 그들의 링크를 갱신하지 않는다.

303 See Other

- 동작을 다시 촉발시키는 페이지 리프레시를 막기 위해 `PUT`혹은 `POST` 뒤에 사용된다.

307 Temporary Redirect

- 웹 페이지가 예측하지 못한 이유로 일시적으로 이용 불가능할 때 가 있다.
  그런 이유로, 검색 엔진은 그들의 링크를 갱신하지 않는다.

### 특수 리다이렉션

304 Not Modified(수정되지 않음)

- 로컬에 의해 캐시된 복사본으로 페이지를 리다이렉트 시킨다.

300 (다중 선택) 수동 리다이렉션이다.

## 리다이렉션을 명시하는 대체 방법

HTTP 리다이렉트가 리다이렉션을 정의하는 유일한 방법은 아니다. 두개의 다른 방법이 있다.

### HTML 리다이렉션

웹 개발자는 서버에 대한 제어권을 가지고 있지 않거나 그것을 구성할 수 없는 경우가 있다. 이러한 특수한 상황들 때문에, 웹 개발자들은 `refresh`를 설정하기 위해 페이지의 `<head>`내에 `<meta>`엘리먼트와 `http-equiv`속성으로 HTML 페이지를 만들 수 있다. 해당 페이지를 디스플레이할 때, 브라우저는 이 엘리먼트를 발견하고 표시된 페이지로 이동할 것이다.

> 이런 리다이렉션들은 브라우저에서 뒤로 가기 버튼을 무용지물로 만든다.

### 자바스크립트 리다이렉션

js의 리다이렉션은 `window.location`프로퍼티에 값을 설정해서 만들어지며, 새로운 페이지가 로드된다.

```js
window.location = 'https://abelog.netlify.com/'
```

HTML 리다이레션처럼, 모든 리소스에서 동작하는 것은 아니며, 명백하게 자바스크립트를 실행한 클라이언트 상에서만 동작한다.
어떤 조건이 충족되는 경우에만 리다이렉션을 촉발시킬 수 있다는 점에서 더 많은 가능성을 가지고 있다.

### 우선 순위

URL 리다이렉션에 대한 세 가지 가능성이 있기에, 몇 가지 방법이 동시에 지정될 수 있는데, 어떤 것이 먼저 적용될까? 우선 순위는 다음과 같다.

1. 페이지가 읽힌 적도 없고 전송된 적도 없는 경우, HTTP 리다이렉트가 항상 먼저 실행된다.
2. 어떤 HTTP 리다이렉트도 없는 경우에, HTML 리다이렉트(`<meta>`)가 실행된다.
3. 자바스크립트 리다이렉트는 최후의 수단으로써 사용되며, 클라이언트 측에서 자바스크립트를 활성화 시킨 경우에만 사용할 수 있다.

가능한 경우, 항상 HTTP 리다이렉트를 사용해야 하며, `<meta>`엘리먼트를 사용해서는 안된다.

## USE CASE

> 리다이렉트에 대한 많은 use case들이 존재하지만, 모든 리다이렉트들이 성능과 직결되므로, 리다이렉트의 사용은 최소한으로 유지되어야 한다.

### 도메인 앨리어싱

이상적으로, 하나의 로케이션이 존재하고, 그래서 하나의 리소스에 대해 하나의 URL이 존재하다고 가정하겠습니다. 그러나 하나의 리소스에 대한 대체 이름을 갖고자 할 때가 있을 수 있습니다.(www 접두사를 갖거나 갖지 않는 몇몇 도메인 혹은 URL을 더 짧고 기억하기 쉽도록 하는 등...) 이런 경우, 리소스를 복제하기 보다는 실제(정식) URL에 대한 리다이렉트를 사용하는 것이 더 유용하다.

도메인 앨리어싱을 하는 경우는 다음과 같다.

- 사이트 범위 확장. `example.com` 페이지를 `www.example.com`로 리다이렉션하는 것이 이 경우에 해당한다.
- 다른 도메인으로의 이동. 당신의 회사가 이름을 변경했고, 이전 이름으로 검색하는 경우 새로운 이름의 사이트를 이용하길 바라는 경우에 해당된다.
- HTTPS 강제. 사이트에 대한 HTTP 버전 요청은 사이트의 HTTPS 버전으로 리다이렉트 될 것이다.

### 링크 유지하기

### 안전하지 않은 요청에 대한 일시적인 응답

---

web의 redirect의 다양한 구현법

1. HTTP 리다이렉트
2. HTML 리다이렉션 `<meta>`
3. javascript 리다이렉션

## spa에서는....?

### 참고

https://developer.mozilla.org/ko/docs/Web/HTTP/Redirections
